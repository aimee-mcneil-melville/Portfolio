---
import { db, Portfolio } from 'astro:db';
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import ProjectDetail from '../../components/ProjectDetail.astro';
import NavBar from '../../components/NavBar.astro';
import Contact from '../../components/Sections/Contact.astro';
import ImageGallery from '../../components/ImageGallery.astro';


export async function getStaticPaths() {
  const portfolios = await db.select().from(Portfolio)
    const id = portfolios.map(portfolio => ({
      params: { id: portfolio.id.toString() }
    }));
    return id
}

const id: number = parseInt(Astro.params.id, 10); 

---
<Layout title="Projects">
  <NavBar/>
  <main>
    <ImageGallery id={id} />
    <ProjectDetail id={id}/>
    <Contact/>
  <main/>
</Layout>